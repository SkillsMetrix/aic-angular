<!doctype html>
<html lang="en">
 <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular.min.js"></script>
    <script src="service.js"></script>
    <script src="controller.js"></script>

 </head>
 <body>
  <div ng-app="app" ng-controller="ContactController">
    <form class="well">
    <label>Name</label> 
        <input type="text" name="name" ng-model="newcontact.name"/>
    <label>Email</label> 
        <input type="email" name="email" ng-model="newcontact.email"/>
    <label>Phone</label> 
        <input type="text" name="phone" ng-model="newcontact.phone" required/>
        <br/>
		
        <input type="hidden" ng-model="newcontact.id" />
     <input type="button" value="Save" ng-click="saveContact()" class="btn btn-primary"/>
    </form>
<table class="table table-striped table-bordered">
<thead> 
<tr>
    <th>ID</th>
    <th>Name</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Action</th>
</tr>
</thead>
<tbody>
<tr ng-repeat="contact in contacts">
    <td>{{contact.id}}</td>
    <td>{{ contact.name }}</td> 
    <td>{{ contact.email }}</td>
    <td>{{ contact.phone }}</td>
    <td>
        <a  href="#" ng-click="edit(contact.id)">edit</a> | 
        <a href="#" ng-click="delete(contact.id)">delete</a>
    </td>
 </tr>
</tbody>
</table>    
</div>

 </body>
</html>


-----



var module = angular.module('app', [])


module.controller('ContactController', function ($scope, ContactService) {
    $scope.contacts = ContactService.loadUsers()
    $scope.saveContact = function () {
        ContactService.save($scope.newcontact)
    }
    $scope.delete = function (id) {
        ContactService.delete(id)
    }

    $scope.edit = function (uid) {
        $scope.newcontact = angular.copy(ContactService.findUser(uid))


    }
})



---

var module = angular.module('app', [])

module.service('ContactService', function () {
    var uid = 1;
    var contacts = []
    // logic to show the data
    this.loadUsers = function () {
        return contacts
    }
    // logic to save the data
    this.save = function (contact) {

        if (contact.id == null) {
            contact.id = uid++;
            contacts.push(contact);
        } else {

            for (i in contacts) {
                if (contacts[i].id == contact.id) {
                    contacts[i] = contact
                }
            }
        }
    }
    this.findUser = function (id) {
        for (i in contacts) {
            if (contacts[i].id == id) {
                return contacts[i]
            }
        }
    }
    // delete
    this.delete = function (uid) {
        for (i in contacts) {
            if (contacts[i].id == uid) {
                contacts.splice(i, 1)

            }
        }
    }

})
